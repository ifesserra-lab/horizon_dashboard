---
interface Props {
	title: string;
}

const { title } = Astro.props;
import '../styles/global.css';
import ThemeToggle from '../components/ThemeToggle.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
---

<!doctype html>
<html lang="pt-BR" class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Horizon - Portal de Pesquisa, Extensão e Pós-Graduação" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
		<meta name="generator" content={Astro.generator} />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
		<title>{title} | Horizon</title>
		
		<script is:inline>
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
					return 'dark';
				}
				return 'light';
			})();
			
			if (theme === 'light') {
				document.documentElement.classList.remove('dark');
			} else {
				document.documentElement.classList.add('dark');
			}
			window.localStorage.setItem('theme', theme);
		</script>
	</head>
	<body class="bg-page-bg text-text-main font-['Inter'] min-h-screen selection:bg-premium-accent/30 transition-colors duration-300">
		<a href={`#main-content`} class="sr-only focus:not-sr-only focus:absolute focus:z-50 focus:p-4 focus:bg-premium-accent focus:text-white rounded-br-xl shadow-xl">
			Pular para o conteúdo principal
		</a>

		<div class="flex">
			<!-- Sidebar -->
			<aside role="banner" class="w-64 h-screen sticky top-0 glass-card rounded-none border-y-0 border-l-0 flex flex-col p-6 overflow-hidden">
				<div class="flex items-center gap-3 mb-12">
					<div class="w-10 h-10 bg-gradient-to-br from-premium-accent to-premium-purple rounded-xl shadow-lg shadow-premium-accent/20 flex items-center justify-center overflow-hidden" aria-hidden="true">
						<span class="text-white font-['Outfit'] font-bold text-xl">H</span>
					</div>
					<h1 class="text-xl font-['Outfit'] font-bold bg-clip-text text-transparent bg-gradient-to-r from-text-main to-slate-400">Horizon</h1>
				</div>

				<nav role="navigation" aria-label="Menu principal" class="flex-1 flex flex-col gap-2">
					<a href={`${import.meta.env.BASE_URL}`} class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-premium-accent/10 hover:text-premium-accent group">
						<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 opacity-70 group-hover:opacity-100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
						<span class="font-medium">Dashboard</span>
					</a>
					<a href={`${import.meta.env.BASE_URL}groups`} class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-premium-accent/10 hover:text-premium-accent group">
						<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 opacity-70 group-hover:opacity-100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
						<span class="font-medium">Grupos</span>
					</a>
					<a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-premium-accent/10 hover:text-premium-accent group opacity-50 cursor-not-allowed" aria-disabled="true">
						<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 opacity-70 group-hover:opacity-100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
						<span class="font-medium">Publicações</span>
					</a>
				</nav>

				<div class="mt-auto pt-6 border-t border-border-main">
					<div class="flex items-center gap-3 px-2">
						<div class="w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-800 border border-border-main" aria-hidden="true"></div>
						<div class="overflow-hidden">
							<p class="text-xs font-bold truncate">Admin University</p>
							<p class="text-[10px] text-text-muted truncate">admin@university.edu</p>
						</div>
					</div>
				</div>
			</aside>

			<!-- Main Content -->
			<div class="flex-1 flex flex-col h-screen overflow-hidden">
				<header role="banner" class="h-16 border-b border-border-main glass-card rounded-none border-x-0 flex items-center justify-end px-8 z-10">
					<ThemeToggle />
				</header>
				<main id="main-content" role="main" class="flex-1 p-8 overflow-y-auto outline-none">
					<Breadcrumbs />
					<slot />
				</main>
			</div>
		</div>
	</body>
</html>

<style is:global>
	* {
		scrollbar-width: thin;
		scrollbar-color: var(--border-primary) transparent;
	}

	::-webkit-scrollbar {
		width: 6px;
	}

	::-webkit-scrollbar-track {
		background: transparent;
	}

	::-webkit-scrollbar-thumb {
		background: var(--border-primary);
		border-radius: 10px;
	}

	::-webkit-scrollbar-thumb:hover {
		background: var(--color-premium-accent);
	}
</style>
